### Requirements Document for: Home Plant Watering System

These are outdated and need to be updated with 250831_DesignConstraints_StakeholederDecisions_v01.md


### 1. Introduction
- Purpose of the document:
  - To capture the user-stated requirements for a home plant watering system without adding AI-suggested items.
- Background and context:
  - The user has installed two flexible tubes in walls from a basement reservoir to two living room windows with plants. Signal cables run alongside for sensors. The user has IoT experience (ESP32), WiFi coverage, and KNX; prefers high automation and iPhone access without building a custom app.
- Objectives of the system:
  - Automate watering of plants at two windows using basement water reservoir, monitor moisture and water usage/status, provide local and remote status/controls, and operate with resilience to connectivity issues.
- Key stakeholders and their roles:
  - User (technical): system owner/operator with IoT experience.
  - Userâ€™s spouse (non-technical): system user requiring simple interaction.

### 2. System Overview
- System name: [specification missing]
- Short description:
  - A two-zone, automated plant watering system using an ESP32-based controller, supplying water from a basement reservoir through in-wall tubes to plants at two windows, with sensor-driven automation and remote status on iPhone without a custom app.
- High-level goals and capabilities:
  - High automation grade, moisture-based control, status visibility on iPhone without a custom app, local device interaction with touch display and LEDs, acoustic alerts via watchdog, offline accessibility, later integration with KNX, ioBroker, or Home Assistant.

### 3. Scope
- Boundaries of the system:
  - Two plant locations (two windows), two tubes (~10 m each) with ~5 m height difference, single basement reservoir requiring manual refilling, local device interface, remote status via existing iPhone-accessible means (no custom app).
- Key functions and features:
  - Automated watering based on soil moisture.
  - Water status/usage derived from ultrasonic level measurements.
  - Local touch display and LED indicators.
  - Acoustic alarms generated by an independent watchdog.
  - iPhone-accessible status without building a custom app.
  - Offline operation when WiFi is unavailable.
  - Future integration with KNX, ioBroker, and Home Assistant.
- Out-of-scope items:
  - GSM module integration.
  - Custom iPhone app development.

### 4. Functional Requirements
- FR-001: The system shall water plants at two windows via two in-wall tubes.
- FR-002: The system shall acquire soil moisture inputs via cables installed alongside the tubes.
- FR-003: The system shall automate watering based on soil moisture readings to achieve a high automation grade.
- FR-004: The system shall provide current system status accessible from an iPhone without requiring a custom iPhone app.
- FR-005: The system shall support two users: a technical user and a non-technical user.
- FR-006: The system shall operate across a vertical lift of 5 m and a tube length of 10 m.
- FR-007: The system shall use a touch display for local interaction.
- FR-008: The system shall provide simple status indication via LEDs showing the system is working.
- FR-009: The system shall remain accessible locally when WiFi is not working.
- FR-010: The system shall measure water usage by computing volume from ultrasonic water level changes in the reservoir.
- FR-011: The system shall provide active user notifications for failures without relying solely on a passive web interface.
- FR-012: The system shall generate acoustic alarms via a buzzer for critical or warning conditions.
- FR-013: The system shall implement an independent watchdog to detect offline or system failures.
- FR-014: The system shall communicate watchdog-detected issues to users actively through acoustic alarms.
- FR-015: The system shall support future integration with KNX.
- FR-016: The system shall support future integration with ioBroker.
- FR-017: The system shall support future integration with Home Assistant.
- FR-018: The system shall implement the controller software using MicroPython.

### 5. Non-Functional Requirements
- NFR-001 (PropertyMASTER): The local device interface usability SHALL support a non-technical user [specification missing] VERIFY.
- NFR-002 (EnvironmentMASTER): WiFi coverage throughout the house SHALL enable the system to provide remote status when available OPERATE.
- NFR-003 (ProcessMASTER): The system SHALL provide active notification to users for failures COMMUNICATE.
- NFR-004 (PropertyMASTER): The local interface SHALL provide offline accessibility when WiFi is not working OPERATE.
- NFR-005 (PropertyMASTER): The touch display SHALL serve as the primary local interaction interface FUNCTION [specification missing] VERIFY.
- NFR-006 (PropertyMASTER): The system quality SHALL support a high automation grade ACHIEVE [specification missing] VERIFY.
- NFR-007 (ProcessMASTER): The controller software SHALL use MicroPython IMPLEMENT.
- NFR-008 (PropertyMASTER): The acoustic alarm SHALL produce audible alerts in the basement HEARD [specification missing] VERIFY.

Notes:
- Where properties/values/conditions are not explicitly provided by the user, they are marked [specification missing] per instructions.

### 6. Assumptions and Dependencies
- Assumptions:
  - The basement and living room have 230 V power available.
  - WiFi coverage is present throughout the house.
  - The reservoir has no tap-water connection and must be refilled manually.
- Dependencies:
  - Ultrasonic sensor availability and correct installation for water level measurement.
  - Soil moisture sensors compatible with the provided cables.
  - Future integrations depend on available KNX, ioBroker, and Home Assistant infrastructure.

### 7. Interface Requirements
- IR-001: The system shall provide an iPhone-accessible status interface without requiring a custom iPhone app. 
- IR-002: The system shall interface with soil moisture sensors via the installed cables.
- IR-003: The system shall interface with an ultrasonic sensor to read reservoir water level.
- IR-004: The system shall interface with a touch display for local control and status.
- IR-005: The system shall interface with LED indicators for system status display.
- IR-006: The system shall interface with an acoustic buzzer for alarms.
- IR-007: The system shall provide an integration interface for KNX [specification missing].
- IR-008: The system shall provide an integration interface for ioBroker [specification missing].
- IR-009: The system shall provide an integration interface for Home Assistant [specification missing].

### 8. Verification and Validation (V&V)
- V&V-001: Verification of FR-004 will be conducted through user testing on an iPhone to confirm status accessibility without a custom app.
- V&V-002: Verification of FR-007 will be conducted through inspection and demonstration of the touch display operation.
- V&V-003: Verification of FR-010 will be conducted through analysis comparing ultrasonic level-derived volume against known added/removed water volumes.
- V&V-004: Verification of FR-012 will be conducted through test activation of acoustic alarms and user audibility confirmation.
- V&V-005: Verification of FR-013 will be conducted through fault injection to confirm watchdog detection and alerting.
- V&V-006: Verification of FR-009 will be conducted by disconnecting WiFi and demonstrating local access via touch display and LEDs.
- V&V-007: Verification of FR-018 will be conducted via code inspection confirming MicroPython usage.

### 9. Appendices and References
- Glossary of terms:
  - KNX: Building automation standard installed in the house.
  - ioBroker: Open-source home automation integration platform.
  - Home Assistant: Open-source home automation platform.
  - Watchdog: Independent mechanism to detect system failure or offline conditions.
- Referenced standards or design guidelines:
  - [specification missing]